<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="report_invoice_fattura_accompagnatoria" inherit_id="account.report_invoice_document">

            <xpath expr="//h2" position="before">
                <t t-if="o.ddt_into_invoice">
                    <t t-if="o.sale_ids and len(o.sale_ids) == 1">
                        <div class="row">
                            <div class="col-xs-6">
                                <h2>Destinatario</h2>
                                <div t-field="o.sale_ids[0].partner_shipping_id"
                                    t-field-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}' />
                                <div t-if="o.sale_ids[0].partner_shipping_id">
                                    VAT number: <span t-field="o.sale_ids[0].partner_shipping_id.vat"/>
                                </div>
                            </div>
                            <div class="col-xs-6">
                                <h2>Cessionario</h2>
                                <div t-field="o.sale_ids[0].partner_invoice_id"
                                    t-field-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}' />
                                <div t-if="o.sale_ids[0].partner_invoice_id">
                                    VAT number: <span t-field="o.sale_ids[0].partner_invoice_id.vat"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </xpath>

            <xpath expr="//p[@t-if='o.fiscal_position.note']" position="after">
                <t t-if="o.ddt_into_invoice">
                    <t t-if="o.sale_ids and len(o.sale_ids) == 1">
                        <div class="row">
                            <style type="text/css">
                                table.delivery_data td h6 { margin: 0; }
                                .signature { min-height: 4em; }
                            </style>

                            <table class="table table-condensed table-bordered delivery_data">
                                <tr>
                                    <td>
                                        <h6>Transportation Reason</h6>
                                        <div class="signature" t-field="o.transportation_reason_id"></div>
                                    </td>

                                    <td>
                                        <h6>Carriage Condition</h6>
                                        <div class="signature" t-field="o.carriage_condition_id"></div>
                                    </td>

                                    <td>
                                        <h6>Goods Description</h6>
                                        <div class="signature" t-field="o.goods_description_id"></div>
                                    </td>

                                    <td>
                                        <h6>Carrier</h6>
                                        <div class="signature" t-field="o.sale_ids[0].carrier_id.name"></div>
                                    </td>

                                    <td>
                                        <h6>Pick up time</h6>
                                        <div class="signature"></div>
                                    </td>

                                    <td>
                                        <h6>Parcels</h6>
                                        <div class="signature" t-field="o.parcels"></div>
                                    </td>

                                    <!-- TODO ADD WEIGHT -->
                                    <!--
                                    <td>
                                        <h6>Gross Weight</h6>
                                        <div class="signature" t-field="o.weight"></div>
                                    </td>
                                    <td>
                                        <h6>Net Weight</h6>
                                        <div class="signature" t-field="ddt.net_weight"></div>
                                    </td>
                                    -->
                                </tr>
                                <!--
                                <tr>
                                -->

                                    <!-- TODO DATE -->
                                    <!--
                                    <td>
                                        <h6>Date</h6>
                                        <div class="signature" t-field="o.date"></div>
                                    </td>
                                    -->

                                    <!-- TODO VOLUME -->
                                    <!--
                                    <td>
                                        <h6>Size</h6>
                                        <div class="signature" t-field="ddt.volume"></div>
                                    </td>
                                    -->
                                <!--
                                </tr>
                                -->
                            </table>
                            <table class="table table-condensed table-bordered delivery_data">
                                <tr>
                                    <td>
                                        <h6>Carrier's Signature</h6>
                                        <div class="signature"></div>
                                    </td>
                                    <td>
                                        <h6>Driver's Signature</h6>
                                        <div class="signature"></div>
                                    </td>
                                    <td>
                                        <h6>Recipient's Signature</h6>
                                        <div class="signature"></div>
                                    </td>

                                    <!-- TODO TO ADD ?-->
                                    <!--
                                    <td colspan="2"><h6>Notes</h6>
                                        <div class="signature" t-field="ddt.note"></div>
                                    </td>
                                    -->
                                </tr>
                            </table>
                        </div>
                    </t>
                </t>
            </xpath>

        </template>
    </data>
</openerp>